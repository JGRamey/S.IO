[2025-06-23 22:45:25 UTC] üéØ YGGDRASIL/S.IO COMPREHENSIVE TEST EXECUTION
[2025-06-23 22:45:25 UTC] ================================================================================
[2025-06-23 22:45:25 UTC] Test Type: all
[2025-06-23 22:45:25 UTC] Verbose Mode: True
[2025-06-23 22:45:25 UTC] Coverage Analysis: True
[2025-06-23 22:45:25 UTC] Log File: /Users/grant/Desktop/Solomon/Database/S.IO/logs/test_report_20250623_184525.log
[2025-06-23 22:45:25 UTC] 
[2025-06-23 22:45:25 UTC] üöÄ Complete Test Suite (all tests)
[2025-06-23 22:45:25 UTC] Command: python3 -m pytest --tb=short -v --cov=yggdrasil --cov-report=html:/Users/grant/Desktop/Solomon/Database/S.IO/logs/coverage --cov-report=term-missing --cov-report=json:/Users/grant/Desktop/Solomon/Database/S.IO/logs/coverage.json tests/ --ignore=tests/conftest.py
[2025-06-23 22:45:25 UTC] 
[2025-06-23 22:45:25 UTC] üîÑ Executing tests...
[2025-06-23 22:46:04 UTC] üìä TEST OUTPUT:
[2025-06-23 22:46:04 UTC] ----------------------------------------
[2025-06-23 22:46:04 UTC] ============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/grant/Desktop/Solomon/Database/S.IO/venv/bin/python3
cachedir: .pytest_cache
rootdir: /Users/grant/Desktop/Solomon/Database/S.IO
configfile: pytest.ini
plugins: anyio-4.9.0, langsmith-0.4.1, cov-6.2.1, asyncio-1.0.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 24 items

tests/quick_agent_test.py::test_basic_functionality PASSED               [  4%]
tests/quick_agent_test.py::test_database_connectivity PASSED             [  8%]
tests/test_agents_mock.py::TestAgentMocks::test_theme_recognition_mock PASSED [ 12%]
tests/test_agents_mock.py::TestAgentMocks::test_doctrine_analysis_mock PASSED [ 16%]
tests/test_agents_mock.py::TestAgentMocks::test_bias_detection_mock PASSED [ 20%]
tests/test_agents_mock.py::TestAgentMocks::test_mcp_agent_manager_mock PASSED [ 25%]
tests/test_agents_mock.py::TestDatabaseMocks::test_database_manager_mock PASSED [ 29%]
tests/test_agents_mock.py::TestDatabaseMocks::test_database_models_mock PASSED [ 33%]
tests/test_bias_standalone.py::test_bias_detection PASSED                [ 37%]
tests/test_config_unit.py::TestConfigurationUnit::test_get_test_settings PASSED [ 41%]
tests/test_config_unit.py::TestConfigurationUnit::test_sample_texts_available PASSED [ 45%]
tests/test_config_unit.py::TestConfigurationUnit::test_environment_variable_override PASSED [ 50%]
tests/test_config_unit.py::TestConfigurationUnit::test_database_url_generation PASSED [ 54%]
tests/test_config_unit.py::TestConfigurationUnit::test_qdrant_url_generation PASSED [ 58%]
tests/test_integration.py::test_full_system_integration FAILED           [ 62%]
tests/test_integration.py::test_database_hybrid_system FAILED            [ 66%]
tests/test_integration.py::test_agent_pipeline FAILED                    [ 70%]
tests/test_integration.py::test_configuration_loading PASSED             [ 75%]
tests/test_mcp_agents.py::test_mcp_agents FAILED                         [ 79%]
tests/test_utils_unit.py::TestLoggingUtils::test_setup_logging PASSED    [ 83%]
tests/test_utils_unit.py::TestLoggingUtils::test_get_logger PASSED       [ 87%]
tests/test_utils_unit.py::TestExceptions::test_yggdrasil_exception PASSED [ 91%]
tests/test_utils_unit.py::TestExceptions::test_database_connection_error PASSED [ 95%]
tests/test_utils_unit.py::TestExceptions::test_all_custom_exceptions PASSED [100%]

=================================== FAILURES ===================================
_________________________ test_full_system_integration _________________________
yggdrasil/database/connection.py:72: in initialize_hybrid_system
    await session.execute("SELECT 1")
venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:463: in execute
    result = await greenlet_spawn(
venv/lib/python3.13/site-packages/sqlalchemy/util/concurrency.py:99: in greenlet_spawn
    _not_implemented()
venv/lib/python3.13/site-packages/sqlalchemy/util/concurrency.py:79: in _not_implemented
    raise ValueError(
E   ValueError: the greenlet library is required to use this function. No module named 'greenlet'

During handling of the above exception, another exception occurred:
venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py:114: in __call__
    result = await fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
yggdrasil/database/connection.py:71: in initialize_hybrid_system
    async with self.async_session_factory() as session:
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:1085: in __aexit__
    await asyncio.shield(task)
venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:1030: in close
    await greenlet_spawn(self.sync_session.close)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/sqlalchemy/util/concurrency.py:99: in greenlet_spawn
    _not_implemented()
venv/lib/python3.13/site-packages/sqlalchemy/util/concurrency.py:79: in _not_implemented
    raise ValueError(
E   ValueError: the greenlet library is required to use this function. No module named 'greenlet'

The above exception was the direct cause of the following exception:
tests/test_integration.py:19: in test_full_system_integration
    await db_manager.initialize_hybrid_system()
venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py:189: in async_wrapped
    return await copy(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py:111: in __call__
    do = await self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py:153: in iter
    result = await action(retry_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/tenacity/_utils.py:99: in inner
    return call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/tenacity/__init__.py:421: in exc_check
    raise retry_exc from fut.exception()
E   tenacity.RetryError: RetryError[<Future at 0x154cd5950 state=finished raised ValueError>]
------------------------------ Captured log call -------------------------------
ERROR    yggdrasil.database.connection:connection.py:77 Failed to initialize hybrid database system: the greenlet library is required to use this function. No module named 'greenlet'
ERROR    yggdrasil.database.connection:connection.py:77 Failed to initialize hybrid database system: the greenlet library is required to use this function. No module named 'greenlet'
ERROR    yggdrasil.database.connection:connection.py:77 Failed to initialize hybrid database system: the greenlet library is required to use this function. No module named 'greenlet'
_________________________ test_database_hybrid_system __________________________
yggdrasil/database/connection.py:72: in initialize_hybrid_system
    await session.execute("SELECT 1")
venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:463: in execute
    result = await greenlet_spawn(
venv/lib/python3.13/site-packages/sqlalchemy/util/concurrency.py:99: in greenlet_spawn
    _not_implemented()
venv/lib/python3.13/site-packages/sqlalchemy/util/concurrency.py:79: in _not_implemented
    raise ValueError(
E   ValueError: the greenlet library is required to use this function. No module named 'greenlet'

During handling of the above exception, another exception occurred:
venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py:114: in __call__
    result = await fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
yggdrasil/database/connection.py:71: in initialize_hybrid_system
    async with self.async_session_factory() as session:
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:1085: in __aexit__
    await asyncio.shield(task)
venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:1030: in close
    await greenlet_spawn(self.sync_session.close)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/sqlalchemy/util/concurrency.py:99: in greenlet_spawn
    _not_implemented()
venv/lib/python3.13/site-packages/sqlalchemy/util/concurrency.py:79: in _not_implemented
    raise ValueError(
E   ValueError: the greenlet library is required to use this function. No module named 'greenlet'

The above exception was the direct cause of the following exception:
tests/test_integration.py:46: in test_database_hybrid_system
    await db_manager.initialize_hybrid_system()
venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py:189: in async_wrapped
    return await copy(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py:111: in __call__
    do = await self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py:153: in iter
    result = await action(retry_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/tenacity/_utils.py:99: in inner
    return call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/tenacity/__init__.py:421: in exc_check
    raise retry_exc from fut.exception()
E   tenacity.RetryError: RetryError[<Future at 0x1609fcef0 state=finished raised ValueError>]
------------------------------ Captured log call -------------------------------
ERROR    yggdrasil.database.connection:connection.py:77 Failed to initialize hybrid database system: the greenlet library is required to use this function. No module named 'greenlet'
ERROR    yggdrasil.database.connection:connection.py:77 Failed to initialize hybrid database system: the greenlet library is required to use this function. No module named 'greenlet'
ERROR    yggdrasil.database.connection:connection.py:77 Failed to initialize hybrid database system: the greenlet library is required to use this function. No module named 'greenlet'
_____________________________ test_agent_pipeline ______________________________
tests/test_integration.py:69: in test_agent_pipeline
    agent_manager = MCPAgentManager()
                    ^^^^^^^^^^^^^^^^^
E   TypeError: MCPAgentManager.__init__() missing 2 required positional arguments: 'postgres_url' and 'qdrant_url'
_______________________________ test_mcp_agents ________________________________
tests/test_mcp_agents.py:140: in test_mcp_agents
    await client.disconnect()
yggdrasil_mcp/client/yggdrasil_mcp_client.py:55: in disconnect
    await self.session.__aexit__(None, None, None)
          ^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'tuple' object has no attribute '__aexit__'. Did you mean: '__init__'?
----------------------------- Captured stdout call -----------------------------
ü§ñ TESTING MCP-INTEGRATED AI AGENTS
==================================================
Using test database: yggdrasil_test

1. Getting available analysis types...
Available AI Analysis Types:

2. Testing Theme Analysis...

============================================================
ANALYSIS SUMMARY: manual_input
============================================================
‚ùå FAILED: 'tuple' object has no attribute 'call_tool'

3. Testing Doctrine Analysis...

============================================================
ANALYSIS SUMMARY: manual_input
============================================================
‚ùå FAILED: 'tuple' object has no attribute 'call_tool'

4. Testing Fallacy Detection...

============================================================
ANALYSIS SUMMARY: manual_input
============================================================
‚ùå FAILED: 'tuple' object has no attribute 'call_tool'

5. Testing Storage Optimization...

============================================================
ANALYSIS SUMMARY: https://example.com/large-treatise
============================================================
‚ùå FAILED: 'tuple' object has no attribute 'call_tool'

6. Testing Bias Detection...

============================================================
ANALYSIS SUMMARY: manual_input
============================================================
‚ùå FAILED: 'tuple' object has no attribute 'call_tool'

7. Testing Comprehensive Analysis...

============================================================
ANALYSIS SUMMARY: manual_input
============================================================
‚ùå FAILED: 'tuple' object has no attribute 'call_tool'

8. Getting Agent Performance Statistics...
Agent Performance Report:
{
  "error": "'tuple' object has no attribute 'call_tool'"
}

‚úÖ All MCP agent tests completed successfully!
------------------------------ Captured log call -------------------------------
ERROR    yggdrasil_mcp.client.yggdrasil_mcp_client:yggdrasil_mcp_client.py:286 Error getting analysis types: 'tuple' object has no attribute 'call_tool'
ERROR    yggdrasil_mcp.client.yggdrasil_mcp_client:yggdrasil_mcp_client.py:261 Error in AI content analysis: 'tuple' object has no attribute 'call_tool'
ERROR    yggdrasil_mcp.client.yggdrasil_mcp_client:yggdrasil_mcp_client.py:261 Error in AI content analysis: 'tuple' object has no attribute 'call_tool'
ERROR    yggdrasil_mcp.client.yggdrasil_mcp_client:yggdrasil_mcp_client.py:261 Error in AI content analysis: 'tuple' object has no attribute 'call_tool'
ERROR    yggdrasil_mcp.client.yggdrasil_mcp_client:yggdrasil_mcp_client.py:261 Error in AI content analysis: 'tuple' object has no attribute 'call_tool'
ERROR    yggdrasil_mcp.client.yggdrasil_mcp_client:yggdrasil_mcp_client.py:261 Error in AI content analysis: 'tuple' object has no attribute 'call_tool'
ERROR    yggdrasil_mcp.client.yggdrasil_mcp_client:yggdrasil_mcp_client.py:261 Error in AI content analysis: 'tuple' object has no attribute 'call_tool'
ERROR    yggdrasil_mcp.client.yggdrasil_mcp_client:yggdrasil_mcp_client.py:305 Error getting agent performance: 'tuple' object has no attribute 'call_tool'
--------------------------- Captured stderr teardown ---------------------------
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/Resources/Python.app/Contents/MacOS/Python: can't open file '/Users/grant/Desktop/Solomon/Database/S.IO/yggdrasil_mcp_server.py': [Errno 2] No such file or directory
=============================== warnings summary ===============================
yggdrasil/database/models.py:17
  /Users/grant/Desktop/Solomon/Database/S.IO/yggdrasil/database/models.py:17: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

venv/lib/python3.13/site-packages/pydantic/fields.py:1093: 19 warnings
  /Users/grant/Desktop/Solomon/Database/S.IO/venv/lib/python3.13/site-packages/pydantic/fields.py:1093: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warn(

tests/test_agents_mock.py:12
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_agents_mock.py:12: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_agents_mock.py:34
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_agents_mock.py:34: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_agents_mock.py:56
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_agents_mock.py:56: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_agents_mock.py:85
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_agents_mock.py:85: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_agents_mock.py:125
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_agents_mock.py:125: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_agents_mock.py:150
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_agents_mock.py:150: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_config_unit.py:12
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_config_unit.py:12: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_config_unit.py:25
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_config_unit.py:25: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_config_unit.py:38
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_config_unit.py:38: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_config_unit.py:50
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_config_unit.py:50: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_config_unit.py:62
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_config_unit.py:62: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

venv/lib/python3.13/site-packages/spacy/cli/_util.py:23
  /Users/grant/Desktop/Solomon/Database/S.IO/venv/lib/python3.13/site-packages/spacy/cli/_util.py:23: DeprecationWarning: Importing 'parser.split_arg_string' is deprecated, it will only be available in 'shell_completion' in Click 9.0.
    from click.parser import split_arg_string

venv/lib/python3.13/site-packages/weasel/util/config.py:8
  /Users/grant/Desktop/Solomon/Database/S.IO/venv/lib/python3.13/site-packages/weasel/util/config.py:8: DeprecationWarning: Importing 'parser.split_arg_string' is deprecated, it will only be available in 'shell_completion' in Click 9.0.
    from click.parser import split_arg_string

tests/test_utils_unit.py:12
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_utils_unit.py:12: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_utils_unit.py:28
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_utils_unit.py:28: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_utils_unit.py:43
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_utils_unit.py:43: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_utils_unit.py:51
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_utils_unit.py:51: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/test_utils_unit.py:63
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_utils_unit.py:63: PytestUnknownMarkWarning: Unknown pytest.mark.unit - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.unit

tests/quick_agent_test.py::test_basic_functionality
tests/test_config_unit.py::TestConfigurationUnit::test_get_test_settings
tests/test_config_unit.py::TestConfigurationUnit::test_environment_variable_override
tests/test_config_unit.py::TestConfigurationUnit::test_database_url_generation
tests/test_config_unit.py::TestConfigurationUnit::test_qdrant_url_generation
tests/test_integration.py::test_full_system_integration
tests/test_mcp_agents.py::test_mcp_agents
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/test_config.py:20: PydanticDeprecatedSince20: The `copy` method is deprecated; use `model_copy` instead. See the docstring of `BaseModel.copy` for details about how to handle `include` and `exclude`. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    test_settings = settings.copy()

tests/quick_agent_test.py::test_basic_functionality
tests/quick_agent_test.py::test_basic_functionality
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/../yggdrasil_mcp/client/yggdrasil_mcp_client.py:231: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    start_time = datetime.utcnow()

tests/quick_agent_test.py::test_basic_functionality
tests/quick_agent_test.py::test_basic_functionality
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
tests/test_mcp_agents.py::test_mcp_agents
  /Users/grant/Desktop/Solomon/Database/S.IO/tests/../yggdrasil_mcp/client/yggdrasil_mcp_client.py:260: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    processing_time = (datetime.utcnow() - start_time).total_seconds()

tests/quick_agent_test.py::test_database_connectivity
  /Users/grant/Desktop/Solomon/Database/S.IO/venv/lib/python3.13/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning: Test functions should return None, but tests/quick_agent_test.py::test_database_connectivity returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_bias_standalone.py::test_bias_detection
  /Users/grant/Desktop/Solomon/Database/S.IO/venv/lib/python3.13/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_bias_standalone.py::test_bias_detection returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.13.5-final-0 _______________

Name                                           Stmts   Miss  Cover   Missing
----------------------------------------------------------------------------
yggdrasil/__init__.py                              2      0   100%
yggdrasil/agents/__init__.py                       8      0   100%
yggdrasil/agents/base.py                         146    108    26%   49-89, 93-99, 104, 114-157, 166-170, 179-236, 240-255, 263-313, 317-322, 328-335, 345-354
yggdrasil/agents/bias_detection.py               231    177    23%   21, 25, 29-32, 37, 41, 45, 142-147, 164-215, 223-258, 262-291, 295-344, 348-390, 394-455, 459-480, 484-491, 495-528, 532-543, 547-580, 590-621, 625-643, 647
yggdrasil/agents/doctrine_analysis.py            164    122    26%   123-133, 148-154, 158-209, 218-233, 242-249, 258-330, 334-364, 373-388, 402-417, 425-440, 444-469, 474-483, 487-505
yggdrasil/agents/fallacy_detection.py            251    210    16%   112-122, 137-145, 149-204, 213-232, 241-248, 257-326, 330-370, 374-379, 383-413, 417-455, 459-478, 482-509, 527-536, 545-560, 574-592, 600-602, 610-630, 634-643, 647-671
yggdrasil/agents/mcp_agent_manager.py            173    107    38%   57-58, 72, 78-88, 92-122, 127-180, 192-201, 210-218, 227-234, 243-256, 265-273, 284-290, 307-323, 338-360, 364-374, 385-416, 421, 432
yggdrasil/agents/orchestrator.py                 134     76    43%   70-78, 82-101, 105-130, 138-155, 159-195, 205-234, 238-267
yggdrasil/agents/smart_storage_agent.py          279    222    20%   65-78, 82-100, 105-158, 178-196, 201-227, 232-255, 260-278, 283-302, 308-323, 329, 336-386, 391-401, 406-424, 430-466, 471-511
yggdrasil/agents/text_sourcing.py                172    145    16%   32-36, 43-72, 85-106, 116-130, 139-172, 182, 192, 202, 206-233, 237-277, 281-303, 307-329, 333-349, 353
yggdrasil/agents/theme_recognition.py            185    147    21%   113-124, 128-163, 175-191, 195-225, 229-270, 279-353, 357-370, 374-395, 403-418, 422-457, 461, 465-474, 484-486
yggdrasil/agents/translation_tracking.py         174    129    26%   70, 77-129, 143-204, 214-232, 240-282, 292-353, 363-409, 419-453, 462-497, 501-529, 538-551
yggdrasil/api/__init__.py                          2      2     0%   3-5
yggdrasil/api/main.py                             48     48     0%   3-128
yggdrasil/api/routes/__init__.py                   0      0   100%
yggdrasil/api/routes/analysis.py                  86     86     0%   3-309
yggdrasil/api/routes/health.py                    56     56     0%   3-118
yggdrasil/api/routes/texts.py                    172    172     0%   3-343
yggdrasil/cli.py                                 321    321     0%   3-742
yggdrasil/config.py                               56      0   100%
yggdrasil/database/__init__.py                     3      0   100%
yggdrasil/database/connection.py                  60     19    68%   57, 61, 74, 84-91, 95, 100-102, 113-114, 121-123
yggdrasil/database/enhanced_models.py            134    134     0%   3-202
yggdrasil/database/models.py                     292      0   100%
yggdrasil/database/populate_categories.py        106    106     0%   3-203
yggdrasil/database/qdrant_manager.py             131     90    31%   49-51, 71-73, 77-85, 89-101, 110-135, 142-172, 182-225, 229-245, 249-263, 267-269, 279-286
yggdrasil/scraping/__init__.py                     8      8     0%   3-11
yggdrasil/scraping/academic_scraper.py           139    139     0%   3-267
yggdrasil/scraping/base_scraper.py               113    113     0%   3-186
yggdrasil/scraping/bible_scraper.py              141    141     0%   3-321
yggdrasil/scraping/book_scraper.py               126    126     0%   3-235
yggdrasil/scraping/buddhist_texts_scraper.py     154    154     0%   3-375
yggdrasil/scraping/hindu_texts_scraper.py        178    178     0%   3-411
yggdrasil/scraping/quran_scraper.py              162    162     0%   3-389
yggdrasil/scraping/scraper_factory.py             35     35     0%   3-69
yggdrasil/scraping/scraping_manager.py           145    145     0%   3-313
yggdrasil/scraping/text_processor.py             167    167     0%   3-366
yggdrasil/scraping/yggdrasil_manager.py          130    130     0%   3-294
yggdrasil/utils/__init__.py                        0      0   100%
yggdrasil/utils/exceptions.py                     18      0   100%
yggdrasil/utils/logging.py                        17      0   100%
----------------------------------------------------------------------------
TOTAL                                           4919   3975    19%
Coverage HTML written to dir /Users/grant/Desktop/Solomon/Database/S.IO/logs/coverage
Coverage JSON written to file /Users/grant/Desktop/Solomon/Database/S.IO/logs/coverage.json
=========================== short test summary info ============================
FAILED tests/test_integration.py::test_full_system_integration - tenacity.Ret...
FAILED tests/test_integration.py::test_database_hybrid_system - tenacity.Retr...
FAILED tests/test_integration.py::test_agent_pipeline - TypeError: MCPAgentMa...
FAILED tests/test_mcp_agents.py::test_mcp_agents - AttributeError: 'tuple' ob...
================== 4 failed, 20 passed, 63 warnings in 32.67s ==================

[2025-06-23 22:46:04 UTC] 
[2025-06-23 22:46:04 UTC] üìà TEST EXECUTION SUMMARY:
[2025-06-23 22:46:04 UTC] ========================================
[2025-06-23 22:46:04 UTC] Status: ‚ùå FAILED
[2025-06-23 22:46:04 UTC] Return Code: 1
[2025-06-23 22:46:04 UTC] Execution Time: 39.45 seconds
[2025-06-23 22:46:04 UTC] Test Type: all
[2025-06-23 22:46:04 UTC] Timestamp: 2025-06-23T22:46:04.679193+00:00
[2025-06-23 22:46:04 UTC] Tests Collected: N/A
[2025-06-23 22:46:04 UTC] Tests Passed: 20
[2025-06-23 22:46:04 UTC] Tests Failed: 4
[2025-06-23 22:46:04 UTC] Tests Skipped: N/A
[2025-06-23 22:46:04 UTC] Warnings: 63
[2025-06-23 22:46:04 UTC] üìã JSON Report saved: /Users/grant/Desktop/Solomon/Database/S.IO/logs/latest_test_report.json
